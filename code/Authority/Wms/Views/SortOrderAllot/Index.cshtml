<script type="text/javascript">
    $(function () {
        $('#master').datagrid({
            onClickRow: function () {
                var row = $('#master').datagrid('getSelected');
                if (row) {
                    $('#details').datagrid({ url: '/SortOrderAllot/OrderDetails/?orderMasterCode=' + row.OrderMasterCode }); //根据主单ID查询细单

                } else {
                    $.messager.show({ title: '提示', msg: '失败!请检查原因！' });
                }
            }
        })
    });
</script>
<div region="center" split="true" border="false" style="border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color: #99BBE8">    
    <table id="master" class="easyui-datagrid" border="false" singleSelect="true" url='/SortOrderAllot/OrderMaster/'
        fit="true" pagination="true" rownumbers="true" pageSize="20">
        <thead>
            <tr>
                <th field="OrderMasterCode" width="100" >主单代码</th>
                <th field="BatchSortId" width="100" hidden="true">批次分拣编号</th>
                <th field="OrderDate" width="100" >订单日期</th>
                <th field="BatchNo" width="80" >批次号</th>
                <th field="PackNo" width="80">烟包包号</th>
                <th field="OrderId" width="120" >订单编码</th>
                <th field="CustomerOrder" width="80">客户顺序</th>
                <th field="CustomerDeliverOrder" width="80">配送顺序</th>
                <th field="Quantity" width="80">烟包数量</th>
                <th field="ExportNo" width="80">包装机方向</th>
                <th field="StartTime" width="100">开始时间</th>
                <th field="FinishTime" width="100">完成时间</th>
                <th field="Status" width="80">任务状态</th>
            </tr>
        </thead>
    </table>
</div>
<div region="south" split="true" border="false" style="height: 250px; border-top-style: solid; border-top-width: 1px; border-top-color: 99BBE8;">
   <table id="details" class="easyui-datagrid" border="false" singleSelect="true" url=""
        fit="true" fitColumns="true" pagination="true" rownumbers="true" pageSize="50">
        <thead>
            <tr>
                <th field="OrderDetailCode" width="100" >细单代码</th>
                <th field="OrderMasterCode" width="100" >主单代码</th>
                <th field="ProductCode" width="100" >商品编码</th>
                <th field="ProductName" width="150">商品名称</th>
                <th field="ChannelCode" width="100">烟道代码</th>
                <th field="Quantity" width="100" >数量</th>
            </tr>
        </thead>
    </table>
</div>
