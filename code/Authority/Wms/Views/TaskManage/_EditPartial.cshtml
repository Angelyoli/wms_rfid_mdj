<script type="text/javascript">
    function editClick() {
        var row = $('#details').datagrid('getSelected');
        if (row) {
            $('#dlg-add').dialog('open').dialog('setTitle', '编辑任务信息');

            //文本赋值&下拉框赋值
            $('#addFm').form('load', row);

            //恢复Form中的文本的有效验证
            $('#Productfm .easyui-validatebox').validatebox({ required: true });
            //恢复Form中禁用的文本
            $('form input').removeAttr("disabled");
            $('form textarea').removeAttr("disabled");

            //TaskType
            if (row.TaskType == '正常任务') {
                $('#inputTaskType').combo('setValue', '01').combo('setText', row.TaskType);
            }
            else if (row.TaskType == '叠空托盘') {
                $('#inputTaskType').combo('setValue', '02').combo('setText', row.TaskType);
            }
            else {
                $('#inputTaskType').combo('setValue', '异常').combo('setText', row.TaskType);
            }
            //CurrentPositionState
            if (row.CurrentPositionState == '未达到') {
                $('#inputCurrentPositionState').combo('setValue', '01').combo('setText', row.CurrentPositionState);
            }
            else if (row.CurrentPositionState == '已达到') {
                $('#inputCurrentPositionState').combo('setValue', '02').combo('setText', row.CurrentPositionState);
            }
            else {
                $('#inputCurrentPositionState').combo('setValue', '异常').combo('setText', row.CurrentPositionState);
            }
            //State
            if (row.State == '等待中') {
                $('#inputState').combo('setValue', '01').combo('setText', row.State);
            }
            else if (row.State == '执行中') {
                $('#inputState').combo('setValue', '02').combo('setText', row.State);
            }
            else if (row.State == '拣选中') {
                $('#inputState').combo('setValue', '03').combo('setText', row.State);
            }
            else if (row.State == '已完成') {
                $('#inputState').combo('setValue', '04').combo('setText', row.State);
            }
            else {
                $('#inputState').combo('setValue', '异常').combo('setText', row.State);
            }
            //TagState
            if (row.TagState == '未点亮') {
                $('#inputTagState').combo('setValue', '01').combo('setText', row.TagState);
            }
            else if (row.CurrentPositionState == '已点亮') {
                $('#inputTagState').combo('setValue', '02').combo('setText', row.TagState);
            }
            else {
                $('#inputTagState').combo('setValue', '异常').combo('setText', row.TagState);
            }
            //OrderType
            if (row.OrderType == '入库单') {
                $('#inputOrderType').combo('setValue', '01').combo('setText', row.OrderType);
            }
            else if (row.CurrentPositionState == '移库单') {
                $('#inputOrderType').combo('setValue', '02').combo('setText', row.OrderType);
            }
            else if (row.CurrentPositionState == '出库单') {
                $('#inputOrderType').combo('setValue', '03').combo('setText', row.OrderType);
            }
            else if (row.CurrentPositionState == '盘点单') {
                $('#inputOrderType').combo('setValue', '04').combo('setText', row.OrderType);
            }
            else {
                $('#inputOrderType').combo('setValue', '异常').combo('setText', row.OrderType);
            }
            //DownloadState
            if (row.DownloadState == '未下载') {
                $('#inputDownloadState').combo('setValue', '0').combo('setText', row.DownloadState);
            }
            else if (row.CurrentPositionState == '已下载') {
                $('#inputDownloadState').combo('setValue', '1').combo('setText', row.DownloadState);
            }
            else {
                $('#inputDownloadState').combo('setValue', '异常').combo('setText', row.DownloadState);
            }

            $('#addFm .easyui-validatebox').validatebox({ required: true });

            url = '/TaskManage/Edit/';

        } else {
            $.messager.alert('错误', '没有选择行！', 'info');
        }
    }
</script>
