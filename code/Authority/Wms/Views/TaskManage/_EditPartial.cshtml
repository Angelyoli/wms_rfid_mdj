<script type="text/javascript">
    function editClick() {
        var row = $('#details').datagrid('getSelected');
        if (row) {
            $('#dlg-add').dialog('open').dialog('setTitle', '编辑任务信息');

            //文本赋值&下拉框赋值
            $('#addFm').form('load', row);

            //恢复Form中的文本的有效验证
            $('#addFm .easyui-validatebox').validatebox({ required: true });
            //恢复Form中禁用的文本
            $('form input').removeAttr("disabled");
            $('form textarea').removeAttr("disabled");

            //TaskType
            if (row.TaskType == '正常任务') {
                $('#taskType2').combo('setValue', '01').combo('setText', row.TaskType);
            }
            else if (row.TaskType == '叠空托盘') {
                $('#taskType2').combo('setValue', '02').combo('setText', row.TaskType);
            }
            else if (row.TaskType == '自动移库') {
                $('#taskType2').combo('setValue', '03').combo('setText', row.TaskType);
            }
            //CurrentPositionState
            if (row.CurrentPositionState == '未达到') {
                $('#currentPositionState2').combo('setValue', '01').combo('setText', row.CurrentPositionState);
            }
            else {
                $('#currentPositionState2').combo('setValue', '02').combo('setText', row.CurrentPositionState);
            }
            //State
            if (row.State == '等待中') {
                $('#state2').combo('setValue', '01').combo('setText', row.State);
            }
            else if (row.State == '执行中') {
                $('#state2').combo('setValue', '02').combo('setText', row.State);
            }
            else if (row.State == '拣选中') {
                $('#state2').combo('setValue', '03').combo('setText', row.State);
            }
            else {
                $('#state2').combo('setValue', '04').combo('setText', row.State);
            }
            //TagState
            if (row.TagState == '未点亮') {
                $('#tagState2').combo('setValue', '01').combo('setText', row.TagState);
            }
            else {
                $('#tagState2').combo('setValue', '02').combo('setText', row.TagState);
            }
            //OrderType
            if (row.OrderType == '入库单') {
                $('#orderType2').combo('setValue', '01').combo('setText', row.OrderType);
            }
            else if (row.OrderType == '移库单') {
                $('#orderType2').combo('setValue', '02').combo('setText', row.OrderType);
            }
            else if (row.OrderType == '出库单') {
                $('#orderType2').combo('setValue', '03').combo('setText', row.OrderType);
            }
            else if (row.OrderType == '盘点单') {
                $('#orderType2').combo('setValue', '04').combo('setText', row.OrderType);
            }
            else if (row.OrderType == '叠空托盘') {
                $('#orderType2').combo('setValue', '05').combo('setText', row.OrderType);
            }
            else if (row.OrderType == '补空托盘') {
                $('#orderType2').combo('setValue', '06').combo('setText', row.OrderType);
            }
            else if (row.OrderType == '移库余烟反库') {
                $('#orderType2').combo('setValue', '07').combo('setText', row.OrderType);
            }
            else if (row.OrderType == '出库余烟返库') {
                $('#orderType2').combo('setValue', '08').combo('setText', row.OrderType);
            }
            else if (row.OrderType == '盘点余烟返库') {
                $('#orderType2').combo('setValue', '09').combo('setText', row.OrderType);
            }
            else {
                $('#orderType2').combo('setValue', '00').combo('setText', row.OrderType);
            }
            //DownloadState
            if (row.DownloadState == '未下载') {
                $('#downloadState2').combo('setValue', '0').combo('setText', row.DownloadState);
            }
            else {
                $('#downloadState2').combo('setValue', '1').combo('setText', row.DownloadState);
            }

            $('#addFm .easyui-validatebox').validatebox({ required: true });

            url = '/TaskManage/Edit/';

        } else {
            $.messager.alert('错误', '没有选择行！', 'info');
        }
    }
</script>
